#####Как использовать ассемблер nasm на macOS.
######Все, что тут делалалось, делалось на 10.9, примерно то же самое точно работает на 10.10.
1. Поставь nasm

Команда `nasm -v` покажет версию установленного nasm. Скорее всего, там будет что-то вроде 0.98, это не работает. Если там будет что-то
больше 2, можно забить на этот пункт. 

Установить новый nasm удобнее всего через менеджер пакетов brew: `brew install nasm`. [Как установить brew](http://brew.sh/).
Если какой-то nasm уже стоял, может потребоваться дописать `--upgrade`.

Теперь для запуска надо указывать пусть не к обычному nasm, а к тому, что лежит в директории brew. У меня это было 
`/usr/local/Cellar/nasm/2.12/bin/nasm`. Удобно сделать alias -- `alias nasm="/usr/local/Cellar/nasm/2.12/bin/nasm"`. Если это просто 
написать в командной строке, алиас сохранится только на текущую сессию. Можно прописать это в .bash_profile, чтобы сохранилось,
все равно старый nasm никому не нужен. [Про bash_profile](http://hathaway.cc/post/69201163472/how-to-edit-your-path-environment-variables-on-mac).

2. Что делать с кодом

По сути все, что надо изменить -- заменить в коде `_start` на `start` (магия) и изменить системные константы. Это `0x2000003` для чтения, 
`0x2000004` для вывода и `0x2000001` для выхода.

3. Как это запускать

```
nasm -f macho64 name.asm // компиляция
ld -macosx_version_min 10.7 name.o -o name // линковка
./name
```
Опыты показали, что `-macosx_version_min 10.7` при запуске в 10.9 нужно писать, а в 10.10 не нужно.
